<table class="table table-bordered table-striped table-dark table-hover">
  <thead>
    <tr>
      <th scope="col">Ticker</th>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <% @tracked_stocks.each do |stock| %>
    <tbody>
      <tr>
        <th scope="row"><%= stock.ticker_symbol %></th>
        <td><%= stock.name %></td>
        <td><%= stock.last_price %></td>
        <td>
            <% if current_user.can_track_stocks?(stock.ticker_symbol) %>
              <div class="results-block mb-3">
                <%= button_to 'Add Stock', user_stocks_path(user: current_user,ticker_symbol: stock.ticker_symbol),
                                          class: 'btn btn-lx btn-success', method: :post %>
              </div>
            <% elsif current_user.id != @user.id %>
              <div class="card card-header bg-light text-dark results-block mb-3" >
                <span>You are already tracking</span>
                <% if !current_user.under_stock_limit? %>
                  10 stocks
                <% elsif current_user.stock_already_tracked?(stock.ticker_symbol) %>
                  this stock
                <% end %>
              </div> 
            <% end %>
            <% if current_user.id == @user.id %><%= link_to 'Remove', user_stock_path(stock.ticker_symbol), data: {confirm: 'Are you sure?'},
                                  class: 'btn-sm btn btn-outline-light', method: :delete %></td>
            <% end %>
      </tr>
    </tbody>
  <% end %>
</table>